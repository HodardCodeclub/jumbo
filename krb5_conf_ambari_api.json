[
    {
        "Clusters": {
            "desired_configs": {
                "type": "krb5-conf",
                "tag": "version1",
                "properties": {
                    "type": "krb5-conf",
                    "tag": "version1",
                    "properties": {
                        "domains": "",
                        "manage_krb5_conf": "true",
                        "conf_dir": "/etc",
                        "content": "\n    [libdefaults]\n      renew_lifetime = 7d\n      forwardable = true\n      default_realm = {{realm}}\n      ticket_lifetime = 24h\n      dns_lookup_realm = false\n      dns_lookup_kdc = false\n      default_ccache_name = /tmp/krb5cc_%{uid}\n      # default_tgs_enctypes = {{encryption_types}}\n      # default_tkt_enctypes = {{encryption_types}}\n    {% if domains %}\n    [domain_realm]\n    {%- for domain in domains.split(',') %}\n      {{domain|trim()}} = {{realm}}\n    {%- endfor %}\n    {% endif %}\n    [logging]\n      default = FILE:/var/log/krb5kdc.log\n      admin_server = FILE:/var/log/kadmind.log\n      kdc = FILE:/var/log/krb5kdc.log\n    [realms]\n      {{realm}} = {\n    {%- if master_kdc %}\n        master_kdc = {{master_kdc|trim()}}\n    {%- endif -%}\n    {%- if kdc_hosts > 0 -%}\n    {%- set kdc_host_list = kdc_hosts.split(',')  -%}\n    {%- if kdc_host_list and kdc_host_list|length > 0 %}\n        admin_server = {{admin_server_host|default(kdc_host_list[0]|trim(), True)}}\n    {%- if kdc_host_list -%}\n    {%- if master_kdc and (master_kdc not in kdc_host_list) %}\n        kdc = {{master_kdc|trim()}}\n    {%- endif -%}\n    {% for kdc_host in kdc_host_list %}\n        kdc = {{kdc_host|trim()}}\n    {%- endfor -%}\n    {% endif %}\n    {%- endif %}\n    {%- endif %}\n      }\n    {# Append additional realm declarations below #}\n    "
                    }
                }
            }
        }
    },
    {
        "Clusters": {
            "desired_config": {
                "type": "kerberos-env",
                "tag": "version1",
                "properties": {
                    "kdc_type": "ipa",
                    "manage_identities": "false",
                    "create_ambari_principal": "false",
                    "manage_auth_to_local": "true",
                    "install_packages": "true",
                    "encryption_types": "aes des3-cbc-sha1 rc4 des-cbc-md5",
                    "realm": "VMS1.LOCAL",
                    "kdc_hosts": "ldap01.vms1.local",
                    "admin_server_host": "ldap01.vms1.local",
                    "executable_search_paths": "/usr/bin, /usr/kerberos/bin, /usr/sbin, /usr/lib/mit/bin, /usr/lib/mit/sbin",
                    "password_length": "20",
                    "password_min_lowercase_letters": "1",
                    "password_min_uppercase_letters": "1",
                    "password_min_digits": "1",
                    "password_min_punctuation": "1",
                    "password_min_whitespace": "0",
                    "service_check_principal_name": "${cluster_name}-${short_date}",
                    "case_insensitive_username_rules": "false",
                    "preconfigure_services": "DEFAULT",
                    "set_password_expiracy": "false",
                    "group": "ambari-managed-principals"
                }
            }
        }
    }
]